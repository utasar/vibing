.ORIG x3000
MAIN_LOOP
    LEA R0, PROMPT
    PUTS
    
    ; Read input
    LEA R1, INPUT_BUF
READ_LOOP
    GETC
    OUT
    ADD R2, R0, #-10
    BRz CHECK_PASS
    STR R0, R1, #0
    ADD R1, R1, #1
    BRnzp READ_LOOP

CHECK_PASS
    AND R0, R0, #0
    STR R0, R1, #0
    
    ; Compare strings
    LEA R0, PASSWORD
    LEA R1, INPUT_BUF
COMPARE
    LDR R2, R0, #0
    LDR R3, R1, #0
    NOT R3, R3
    ADD R3, R3, #1
    ADD R4, R2, R3
    BRnp WRONG
    ADD R2, R2, #0
    BRz CORRECT
    ADD R0, R0, #1
    ADD R1, R1, #1
    BRnzp COMPARE

CORRECT
    LEA R0, SUCCESS_MSG
    PUTS
    HALT

WRONG
    LEA R0, FAIL_MSG
    PUTS
    BRnzp MAIN_LOOP

PROMPT      .STRINGZ "Enter password: "
SUCCESS_MSG .STRINGZ "\nLogin Successful"
FAIL_MSG    .STRINGZ "\nLogin Unsuccessful: Incorrect Password\n"
PASSWORD    .STRINGZ "ABCD1234"
INPUT_BUF   .BLKW #20
.END
